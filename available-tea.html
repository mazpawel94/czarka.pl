<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      body {
        box-sizing: border-box;
        font-family: arial;
        text-align: center;
      }

      .tea-wrapper {
        display: flex;
        flex-wrap: wrap;
      }

      .tea {
        flex-basis: calc(20% - 14px);
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        height: 40px;
        padding: 5px;
        background-color: rgb(56, 231, 56);
        color: white;
        border-radius: 3px;
        margin: 2px;
        cursor: pointer;
      }

      .empty {
        background-color: red;
      }

      .hidden {
        display: none;
      }

      input {
        margin: 0 auto;
        margin: 15px;
      }

      button {
        background-color: #fff;
        border: 1px solid gray;
        color: gray;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <input type="text" placeholder="Wyszukaj" /><button>x</button>
    <div class="tea-wrapper"></div>
    <script>
      const tea = [
        "Bai Mu Dan",
        "Yue Guang Bai 2017",
        "Bai Hao Yin Zhen",
        "Ya Bao Yesheng",
        "Phoenix Pearl",
        "Bvumbwe White Peony",
        "White Nepal Himalayan",
        "White Flower Lychee Ball",
        "Malawi White Peony",
        "China White Snow Buds",
        "Guangxi Silver Needle",
        "White Nepal Sakhira",
        "Nepal Bai Mu Dan",
        "Kenia Rhino 2018",
        "Hong Yu Bai Cha 2017",
        "Biały Anioł",
        "Szampańskie Truskawki",
        "Martynika",
        "Bai Mu Dan Rose",
        "Soczysta Morela",
        "Marakuja i Brzoskwinia",
        "Junshan Yin Zhen",
        "Kekecha",
        "Huang Xiao Tea",
        "Milk Oolong",
        "Shui Xian",
        "Shui Xian Organic",
        "Da Hong Pao",
        "Formosa Mountain Hong Shui",
        "Mi Lan Xiang Dan Cong",
        "Si Ji Chun Oolong 2018",
        "Dong Ding Oolong",
        "Songboling Dong Ding Oolong 2018",
        "Bao Zhong 2018",
        "Bai Hao Oolong",
        "Yan Xiang Oolong 2018",
        "Tie Guan Yin Supergrade 2018",
        "Jin Xuan 2018",
        "Lushan Hong Shui",
        "Qingjing Wuyi Oolong 2018",
        "Qingjing Wild Roasted Oolong 2018",
        "Nepal Oolong",
        "Ya Shi Xiang Dan Cong „Kacza Kupa” 2018",
        "Bagua Hong Shui 2018",
        "Gui Fei 2018",
        "Taiwan Wuyi Hong Shui Bingcha 2018",
        "Wenshan Bao Zhong 2018",
        "GABA Oolong Bio",
        "Long Feng Xia 2018",
        "Chunyang Hong Shui Oolong 2013",
        "Mae Salong Oolong 2017",
        "Da Wu Ye Dan Cong 2017",
        "Xianghua Tie Guan Yin 2018",
        "Alishan Tie Guan Yin 2018",
        "Bihakkocha Koshun 2017",
        "Tie Guan Yin Traditional",
        "Tie Guan Yin Green Orchid",
        "Yunnan Zao Chun 2019",
        "Meng Ding Mao Jian",
        "Anji Bai Cha 2018",
        "Ding Gu Da Fang",
        "White Monkey",
        "Che Tai Nguyen",
        "Bi Luo Chun",
        "Gunpowder Temple Of Heaven",
        "Genmaicha",
        "Hojicha",
        "Sencha Harumoegi 2018",
        "Sencha Okumidori 2018",
        "Sencha Yabukita 2018",
        "Gyokuro Kyoto 2018",
        "Anhua Song Zhen 2018",
        "Lu’an Cui Lan 2018",
        "Huangshan Mao Feng 2018",
        "Jiuhua Fo Cha 2018",
        "Matcha iri Genmaicha",
        "Tamaryokucha Ureshino 2018",
        "Matcha iri Sencha",
        "Fog Green Tea",
        "Sejak",
        "Jeoncha",
        "Bancha Kyoto 2018",
        "Sencha",
        "Long Jing",
        "Lu An Gua Pian",
        "Gyokuro",
        "Phoenix Eyes",
        "Bai Lu Green 2018",
        "Bagua Mao Jian 2019",
        "Bi Hong Green",
        "Chun Mei",
        "Matcha iri Karigane",
        "Kukicha",
        "Long Jing Supergrade 2018",
        "Sencha Kagoshima",
        "Yunnan Zielona",
        "Tokujo Karigane Isecha 2018",
        "Lu Shan Yun Wu 2018",
        "Xi Hu Long Jing 2018",
        "Nepal Everest Green",
        "Gyokuro Miyazaki Bio",
        "Kabusecha Kagoshima Bio",
        "Anji Bai Long Jing 2018",
        "Woojeon",
        "Simao Yin Si 2017",
        "Sencha Żeń- szeń",
        "Gejsza",
        "Martynika",
        "Anielskie Łąki",
        "Mały Budda",
        "Sencha Sakura",
        "Jaśminowa",
        "Sencha Ananasowa",
        "Moc Ginkgo (Wellness)",
        "Tuareg (miętowa)",
        "Sencha Żurawina Truskawka",
        "Sencha Imbir i Cytryna",
        "Sencha Winogronowa",
        "Gunpowder Cynamonowy",
        "Siedem Zielonych Skarbów",
        "Moc Aloesu (Wellness)",
        "Moc Combucha (Wellness)",
        "Sencha Poziomka",
        "Tropicana",
        "Sencha Kaktusowa",
        "Maharani",
        "8 skarbów Shaolin",
        "Gunpowder Mango",
        "Rivendell",
        "Sencha Owoce Leśne i Figi",
        "Tenshi",
        "Granat Grejpfrut",
        "Limonka Eukaliptus",
        "Moc Rokitnika",
        "Jasmine Chulan",
        "Wietnamska z Lotosem",
        "Soczysta Morela",
        "Blossom",
        "Yunnan Złoty",
        "Yunnan Golden Silk",
        "Bvumbwe Handmade Black",
        "Hong Yu 2018 „Rubinowa”",
        "Ceylon Kenilworth",
        "GABA Black Bio 2018",
        "Golden Nepal Antu Valley",
        "Yunnan Special",
        "Darjeeling Castleton SF",
        "Darjeeling Jungpana FTGFOP1 Inbetween",
        "Darjeeling Jungpana FF 2018",
        "Nepal Everest",
        "Rosyjska Karawana",
        "Gruzińska",
        "Gruzińska „Guguli” 2018",
        "Kenia Mountain Black 2018",
        "Assam Singri",
        "Lapsang Souchong",
        "Sikkim Temi FF",
        "Wschodniofryzyjska",
        "Iran Lahidżan TGFOP",
        "Darjeeling Margaret's Hope FTGFOP 1 SF",
        "Assam Mokalbari",
        "Nepal Maloom",
        "Keemun Mao Feng Special 2018",
        "Sikkim Temi SF",
        "English Breakfast",
        "Golden Monkey",
        "Bi Hong Cha",
        "Yunnan",
        "Keemun",
        "Ceylon Nuwara Eliya",
        "Darjeeling Castleton FTGFOP1",
        "Yunnan Golden Tips",
        "Turecka",
        "Assam Mangalam FTGFOP1",
        "Assam Dagapur",
        "Assam Brahmaputra",
        "Ceylon Ruhuna Golden Garden OP1",
        "Wild Yunnan Moonlight Organic",
        "Wakocha Benifuki",
        "Mi Lan Xiang Hongcha 2018",
        "Baoshan Yesheng 2017",
        "Sichuan Hongcha 2018",
        "Sichuan Emei Hongcha 2018",
        "Pu-Erh",
        "Pu-Erh Mini Tuocha",
        "Lao Mao Green Pu-erh",
        "Pu-Erh Organic",
        "Pu-Erh Special",
        "Guangxi Liu Bao",
        "Lao Cha Tou Pu-erh 2005 ",
        "Lao Shu Bing Pu Erh Cha",
        "Golden Pu-erh",
        "Pu-Erh Imperial Bio",
        "Ban Zhang Shu Pu-erh",
        "Yiwu Shu Pu- erh",
        "6FTM Yibang 2006",
        "Xiaguan Teji Tuocha 2005",
        "Fenghuang Tuocha 2009",
        "Pu-erh Goji",
        "Pu-Erh Żurawinowa",
        "Pu-Erh Malina Poziomka",
        "Pu-Erh Chińska Wiśnia",
        "Pu-Erh Pomarańcza",
        "Pu-Erh Truskawkowa",
        "Pu-Erh Tropikalna",
        "Pu-Erh Fitness",
        "Pu-Erh Orzeźwiający",
        "Ogniste Mango",
        "Hiszpańska Mandarynka",
        "Chai Masala",
        "Królewna Śnieżka",
        "Zimowy Sen",
        "Orientalna",
        "Indyjski specjał",
        "Earl Grey Imperial",
        "Earl Grey z bławatkiem",
        "Czarna wiśnia",
        "Ceylon Earl Grey Mango",
        "Berries Delight",
        "Lady Grey",
        "Ceylon Earl Grey",
        "Różany Ogród",
        "Earl Grey Róża - Cytryna",
        "Złota Malina",
        "Laponia",
        "Śliwka w Cynamonie",
        "Cytrusowa Magia",
        "Piernikowa",
        "Earl Grey Royal",
        "Rooibos Mięta",
        "Rooibos BIO",
        "Rooibos Pistacja",
        "Rooibos Pomarańcza - Pigwa",
        "Rooibos Lemonita",
        "Rooibos Waniliowy",
        "Rooibos Żurawina",
        "Rooibos Pomarańcza - Eukaliptus",
        "Rooibos Zielony BIO",
        "Rooibos Kalahari",
        "Rooibos Czekolada - Pomarańcza",
        "Honeybush",
        "Rooibos Mango - Truskawka BIO",
        "Rooibos Fresh",
        "Rooibos Tropikalny",
        "Amelia",
        "Pomarańcza Wanilia",
        "Słodkie Owoce",
        "Cynamonowo Jabłkowa",
        "Grzaniec",
        "Korzenna",
        "Kalifornia",
        "Malina i lipa",
        "Wiśnie w Rumie",
        "Floryda",
        "Bora Bora",
        "Królewski Bukiet",
        "Owoce Leśne",
        "Owoc Miłości",
        "Happy Colada",
        "Wiśnia Kiwi Kokos",
        "Mangie",
        "Moc Witamin",
        "Bananowo- Jabłkowa",
        "Cytrynowa Babeczka",
        "Malinowa",
        "Tutti Frutti",
        "Titicaca",
        "Wiśniowa",
        "Pina Colada",
        "Czerwone Owoce",
        "Ziołowy ogród",
        "Sarsaparilla",
        "Melisa",
        "Trawa cytrynowa",
        "Damiana Liść",
        "Żeń-Szeń Syberyjski (Eleutherococcus)",
        "Lawenda",
        "Pokrzywa",
        "Liść Brzozy",
        "Babka Lancetowata",
        "Kwiat Jaśminu",
        "Kwiat Bzu Czarnego",
        "Kwiat Nagietka",
        "Kwiat Lipy",
        "Lubczyk Ziele",
        "Mięta Nana",
        "Czystek Bio",
        "Jeżówka Korzeń",
        "Kwiat Hibiskusa",
        "Dzika Róża",
        "Aronia",
        "Czarny Bez (owoce)",
        "Schizandra (Cytryniec Chiński)",
        "Korzeń Arktyczny",
        "Honeybush",
        "Bukiet ziół na wieczór",
        "Catuaba",
        "Smukła Sylwetka",
        "Czas Relaksu",
        "Lapacho",
        "Płaski Brzuch",
        "Przeciw Stresowi",
        "Ginkgo Biloba",
        "Dla Mam",
        "Dobra Noc",
        "Stewia",
        "Werbena Cytrynowa",
        "Imbir Kandyzowany"
      ];
      const wrapper = document.querySelector(".tea-wrapper");
      const input = document.querySelector("input");
      const button = document.querySelector("button");
      const empty = [];
      const getTeas = () => {
        const xhr = new XMLHttpRequest();
        xhr.open("GET", "https://czarka-api.herokuapp.com/tea-available", true);
        xhr.setRequestHeader("Content-type", "application/json");
        xhr.addEventListener("load", function() {
          const date = JSON.parse(this.responseText);
          date.forEach(e => {
            empty.push(e.tea);
          });
          tea.sort().forEach(e => createDiv(e));
        });
        xhr.send();
      };

      getTeas();

      const createDiv = element => {
        const newDiv = document.createElement("div");
        newDiv.classList.add("tea");
        if (empty.includes(element)) newDiv.classList.add("empty");
        newDiv.textContent = element;
        wrapper.appendChild(newDiv);
      };

      document.addEventListener("click", function(e) {
        if (e.target.classList.contains("tea")) {
          e.target.classList.toggle("empty");
          const xhr = new XMLHttpRequest();
          xhr.open(
            "PUT",
            "https://czarka-api.herokuapp.com/tea-available",
            true
          );
          xhr.setRequestHeader("Content-type", "application/json");
          xhr.send(`{
      	"tea": "${e.target.textContent}",
      	"available": "${!e.target.classList.contains("empty")}"
      }`);
        }
      });

      const changeInput = () => {
        document.querySelectorAll(".tea").forEach(tea => {
          tea.classList.remove("hidden");
          if (
            !tea.textContent.toLowerCase().includes(input.value.toLowerCase())
          )
            tea.classList.add("hidden");
        });
      };
      input.addEventListener("input", changeInput);
      button.addEventListener("click", () => {
        input.value = "";
        changeInput();
      });
    </script>
  </body>
</html>
